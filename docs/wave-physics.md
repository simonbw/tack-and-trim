# Wave Physics Reference

## Overview

This document explains the real-world physics of ocean waves that we're modeling in Tack & Trim. Understanding these phenomena helps inform which effects matter for gameplay and how to approximate them computationally.

---

## Part 1: Wave Physics

### 1.1 Types of Ocean Waves

#### Wind Waves (Sea)

Generated by **local wind** blowing over the water surface.

Characteristics:

- Chaotic, irregular
- Short wavelength (1-10 meters typically)
- Steep (high height-to-length ratio)
- Direction roughly matches wind direction
- Multiple frequencies superimposed

Development depends on:

- **Wind speed**: Faster wind = more energy = bigger waves
- **Fetch**: Longer fetch = more developed sea state
- **Duration**: How long wind has been blowing

#### Swell

Waves that have **traveled far from their generation area**.

Characteristics:

- Organized, regular
- Long wavelength (50-500+ meters)
- Gentle (low height-to-length ratio)
- Can travel thousands of kilometers
- Direction independent of local wind
- Arrives as distinct "sets" with consistent period

A calm day can have large swell from a distant storm.

#### The Difference Matters

```
Wind Waves (Local)              Swell (Distant)

  /\    /\  /\                    ___/‾‾‾\___/‾‾‾\___
 /  \  /  \/  \                  /           \
/    \/                         /             \

Short, steep, chaotic           Long, gentle, organized
Follows local wind              Any direction
```

In practice, the sea surface is usually a **combination** of wind waves and swell superimposed.

### 1.2 Wave Spectrum

Real ocean waves aren't single sinusoids - they're a sum of many wave components with different:

- Frequencies (wavelengths)
- Amplitudes
- Directions
- Phases

This is described by a **wave spectrum** - energy distribution across frequencies.

Common spectral models:

**Pierson-Moskowitz** (fully developed sea):

```
S(ω) = (αg²/ω⁵) × exp(-β(ω₀/ω)⁴)

where:
  ω = wave frequency
  ω₀ = peak frequency (depends on wind speed)
  α, β = constants
  g = gravity
```

**JONSWAP** (fetch-limited):
Adds a peak enhancement factor for developing seas.

For our game, we don't need to implement these exactly - just understand that:

1. Wave energy is distributed across frequencies
2. Peak frequency shifts lower (longer waves) with more fetch
3. Total energy increases with wind speed and fetch

### 1.3 How Terrain Affects Waves

#### Blocking

Land masses completely stop waves. Points in the **wave shadow** of an island receive no direct waves from that direction.

```
Swell direction: →

        ████████
       ██      ██
      ██ Island ██
       ██      ██          Wave shadow
        ████████          (no direct swell)
            ╲
             ╲
              ╲
               ╲
```

#### Diffraction

Waves **bend around obstacles** and spread into shadowed regions. This is the key phenomenon for realistic coastal waters.

```
Swell direction: →

                    ↗ ↗ ↗
                  ↗
        ████████ → →
       ██      ██ → → → →
      ██ Island ██ → → → → → →
       ██      ██ → → → →
        ████████ → →
                  ↘
                    ↘ ↘ ↘

Waves curve around the island edges into the shadow zone.
```

The amount of diffraction depends on the ratio of **wavelength to obstacle size**:

- Long waves (swell) diffract more - they bend significantly around obstacles
- Short waves (chop) diffract less - sharper shadows

This is why bays can have gentle swell rolling in through an entrance while being sheltered from wind chop.

**Huygens' Principle**: Every point on a wavefront acts as a source of secondary wavelets. When waves pass an edge or through a gap, those wavelets spread out.

For a gap/inlet:

```
Swell direction: →

████████████         ████████████
            │       │
            │  Gap  │
            │       │
════════════╪═══════╪════════════
→ → → → → → │→ → → →│ → → → → → →
→ → → → → → │→ → → →│ → → → → → →
════════════╪═══════╪════════════
            │       │
            │       │  Waves spread out
            │   ↓   │  (diffract) through
            ╱   ↓   ╲  the gap
          ╱    ↓     ╲
        ╱   ↙  ↓  ↘   ╲
      ↙   ↙    ↓    ↘   ↘
```

The gap acts like a new wave source, radiating into the sheltered bay.

#### Refraction

Waves **bend toward shallower water** because the shallow portion of a wave slows down first.

```
Deep water                    Shallow water (near shore)

Wave crests:
                                   │
═══════════════════               │ Crests bend to align
    ══════════════════════       │ with depth contours
        ══════════════════════   │
            ══════════════════════│
                ══════════════════│
                    ══════════════│
                                  │ Shoreline
```

Effects:

- Waves tend to arrive roughly parallel to shorelines
- Headlands focus wave energy (waves converge)
- Bays spread wave energy (waves diverge)

Mathematically, wave speed in shallow water:

```
c = √(g × d)

where d = water depth, g = gravity
```

Snell's Law applies - waves bend toward the slower medium (shallower water).

#### Shoaling

As waves enter shallower water, they undergo **shoaling**:

- Wavelength decreases (crests bunch up)
- Wave speed decreases
- Wave height INCREASES (energy conserved in smaller volume)
- Waves become steeper

This is why waves get bigger and steeper as they approach shore.

**Green's Law** (approximate):

```
H₂/H₁ = (d₁/d₂)^(1/4)

where H = wave height, d = water depth
```

As depth halves, wave height increases by ~19%.

#### Damping / Dissipation

Wave energy is lost through:

- Bottom friction in shallow water
- Breaking (when waves get too steep)
- Turbulent dissipation

Near shores, waves are damped. Very shallow areas have reduced wave activity.

#### Reflection

Steep shores, cliffs, and seawalls **reflect** waves back:

```
Incoming wave →                Reflected wave ←
═══════════════►   █████████   ◄═══════════════
                   █ Cliff █
═══════════════►   █████████   ◄═══════════════
```

This creates interference patterns - "clapotis" where incoming and reflected waves create standing wave patterns with:

- Nodes (minimal motion)
- Antinodes (doubled motion)

Reflectivity depends on shore steepness:

- Gradual sandy beach: low reflection, high absorption
- Vertical seawall: high reflection

### 1.4 Wave Breaking (Brief Note)

When wave steepness exceeds a threshold, waves break. This happens when:

```
H/λ > ~0.14  (deep water)
H/d > ~0.78  (shallow water, depth-limited)
```

Breaking creates:

- Surf zones near beaches
- White water
- Significant energy dissipation
- Turbulence

**For our initial implementation, we're not modeling breaking waves.** This could be added later as a visual/physics enhancement.

### 1.5 Combining Wind Waves and Swell

Real sea states combine multiple wave populations:

| Component       | Source          | Character                           |
| --------------- | --------------- | ----------------------------------- |
| Primary swell   | Distant storm   | Long, organized, from one direction |
| Secondary swell | Different storm | May arrive from different direction |
| Wind waves      | Local wind      | Short, chaotic, follows wind        |
| Residual chop   | Recent wind     | Decaying locally-generated waves    |

The sea surface is the superposition of all these.

**Cross-seas**: When swell and wind waves come from different directions, creates confused, uncomfortable conditions.

---

## Part 2: Currents

### 2.1 Types of Currents

#### Tidal Currents

Driven by tidal water movement:

- Flow INTO enclosed areas as tide rises (flood)
- Flow OUT as tide falls (ebb)
- Strongest in constrictions (narrows, inlets)
- Reverse direction every ~6 hours

```
Rising tide (flood):

    ██████   ═══►   ██████
    ██████   ═══►   ██████
       Bay  ←═══   Ocean
    ██████   ═══►   ██████
    ██████   ═══►   ██████

Water flows INTO the bay through the inlet
```

#### Wind-Driven Currents

Surface water moves at ~2-3% of wind speed, angled ~15° to the right of wind (Northern Hemisphere) due to Coriolis and Ekman effects.

For coastal sailing, simplified as:

- Surface current roughly downwind
- Magnitude: windSpeed × 0.02-0.03

#### Gradient Currents

Water flows from areas of higher water level to lower. Near coasts:

- Wave setup near beaches creates offshore return flow
- Longshore currents parallel to beach

### 2.2 Current Effects on Waves

Currents modify wave behavior:

**Following current** (current in wave direction):

- Waves lengthen and flatten
- Reduced steepness

**Opposing current** (current against wave direction):

- Waves shorten and steepen
- Can cause breaking
- "Tide rips" where tidal currents oppose swell

**Cross current**:

- Waves bend (refraction)
- Direction shifts

### 2.3 Current Effects on Sailing

For boats:

- Speed Over Ground = Boat Speed + Current
- Apparent wind changes as current affects boat motion
- Tacking/gybing decisions influenced by current
- Strong currents through narrows can be dangerous or helpful

---

## Part 3: Summary - What to Simulate

### High Priority (Core Experience)

| Phenomenon               | Why It Matters                               |
| ------------------------ | -------------------------------------------- |
| Swell blocking           | Sheltered anchorages feel different          |
| Diffraction              | Bays have character, not just "no waves"     |
| Fetch-limited wind waves | Coastal areas feel different from open ocean |
| Basic shoaling           | Waves change character near shore            |

### Medium Priority (Enhanced Realism)

| Phenomenon         | Why It Matters                             |
| ------------------ | ------------------------------------------ |
| Refraction         | Waves align with shore, focus on headlands |
| Tidal currents     | Time-varying tactical element              |
| Damping near shore | Shallow areas are calmer                   |

### Lower Priority (Future Enhancement)

| Phenomenon             | Why It Matters                   |
| ---------------------- | -------------------------------- |
| Reflection             | Interesting near seawalls/cliffs |
| Breaking waves         | Visual appeal, surf zones        |
| Cross-seas             | Weather transitions feel complex |
| Detailed wave spectrum | More realistic wave appearance   |

---

## Part 4: Simplifications We're Making

### Acceptable Simplifications

1. **2D propagation**: We ignore vertical wave orbital motion - just surface height and direction
2. **Steady-state terrain effects**: Pre-compute how terrain affects waves, don't simulate fluid dynamics
3. **Linear superposition**: Just add wave components - ignore nonlinear wave-wave interaction
4. **Instant fetch response**: Wind waves adjust immediately to local fetch (skip duration-limited development)
5. **Simplified diffraction**: Approximate spreading rather than solving wave equation
6. **No wave breaking**: Waves don't break or dissipate in surf zones (for now)

### What We Preserve

1. **Distinct wind waves vs swell**: Different sources, different character
2. **Fetch dependence**: Local geography affects wind wave development
3. **Diffraction through gaps**: Key to making bays feel sheltered but alive
4. **Shoaling**: Waves change near shore
5. **Spatial variation**: No two places have identical wave conditions

---

## Glossary

| Term             | Definition                                         |
| ---------------- | -------------------------------------------------- |
| Fetch            | Distance wind has blown over open water            |
| Swell            | Long-wavelength waves from distant storms          |
| Sea              | Locally wind-generated waves                       |
| Shoaling         | Wave transformation in shallow water               |
| Diffraction      | Waves bending around obstacles                     |
| Refraction       | Waves bending due to depth changes                 |
| Clapotis         | Standing waves from reflection                     |
| Cross-seas       | Waves from multiple directions                     |
| Fully developed  | Sea state in equilibrium with wind                 |
| Duration-limited | Sea still building (wind hasn't blown long enough) |
| Fetch-limited    | Sea limited by available fetch distance            |
